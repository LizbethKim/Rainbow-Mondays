<!DOCTYPE html>
<html style="height: 100%;">
    <head>
        <meta charset="utf-8">
        <title>D3 Test</title>
        <script src="/static/js/d3.js"></script>
        <script src="/static/js/d3.geomap.dependencies.min.js"></script>
        <script src="/static/js/d3.geomap.js"></script>
        <link rel="stylesheet" href="/static/css/d3.geomap.css">
    </head>
    <body style="height: 100%;">
        <div id="map" style="width: 100%;height: 100%;">

        </div>

        <script>
            var map = d3.geomap.choropleth();
            map.geofile('/static/geodata/geodata.json');
            map.projection(d3.geo.equirectangular);
            map.unitId("name");
            map.column("test");
            map.colors(colorbrewer.YlGnBu[9]);
            map.scale(147);
            map.translate([-100,0]);
            d3.csv('/static/geodata/test.csv', function(error, data) {
                d3.select('#map')
                        .datum(data)
                        .call(map.draw, map);
            });
            //d3.select('#map').call(map.draw, map);
        </script>
    </body>
</html>